<div class="restaurante-layout">
  <!-- üìä Barra de pesta√±as -->
  <div class="tabs-bar">
    <button
      mat-button
      [class.active]="selectedTab === 'mostrador'"
      (click)="selectTab('mostrador')"
    >
      Mostrador
    </button>

    <button
      mat-button
      [class.active]="selectedTab === 'domicilio'"
      (click)="selectTab('domicilio')"
    >
      Domicilio
    </button>

    <button
      mat-raised-button
      color="primary"
      class="nuevo-btn"
      (click)="toggleNuevoPedido()"
    >
      {{ mostrarNuevoPedido ? '‚úï Cerrar' : '+ Nuevo Pedido' }}
    </button>
  </div>

  <!-- üß± CONTENEDOR FLEX: TABLAS + PANEL NUEVO PEDIDO -->
  <div class="tablas-y-panel">
    <!-- üßæ TABLAS -->
    <div class="tablas-container">
      
      <!-- üü† MOSTRADOR -->
      <ng-container *ngIf="selectedTab === 'mostrador'">
        
        <!-- TABLA PENDIENTES -->
        <div class="tabla-seccion">
          <h3>Pendientes</h3>
          <table mat-table [dataSource]="pendientes" class="mat-elevation-z2 tabla-foodu">
            
            <!-- Columna ID -->
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <!-- Columna Hora -->
            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <!-- Columna Estado -->
            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <!-- Columna Cliente -->
            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <!-- Columna Total -->
            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>

        <!-- TABLA EN CURSO -->
        <div class="tabla-seccion">
          <h3>En curso</h3>
          <table mat-table [dataSource]="enCurso" class="mat-elevation-z2 tabla-foodu">
            
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>

        <!-- TABLA CERRADAS -->
        <div class="tabla-seccion">
          <h3>Cerradas (√öltimas 5)</h3>
          <table mat-table [dataSource]="cerradas" class="mat-elevation-z2 tabla-foodu">
            
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>
      </ng-container>

      <!-- üèçÔ∏è DOMICILIO -->
      <ng-container *ngIf="selectedTab === 'domicilio'">

        <!-- TABLA PENDIENTES DOMICILIO -->
        <div class="tabla-seccion">
          <h3>Pendientes</h3>
          <table mat-table [dataSource]="pendientesDomicilio" class="mat-elevation-z2 tabla-foodu">
            
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>

        <!-- TABLA EN PREPARACI√ìN -->
        <div class="tabla-seccion">
          <h3>En preparaci√≥n</h3>
          <table mat-table [dataSource]="enPreparacion" class="mat-elevation-z2 tabla-foodu">
            
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>

        <!-- TABLA ENVIADOS -->
        <div class="tabla-seccion">
          <h3>Enviados</h3>
          <table mat-table [dataSource]="enviados" class="mat-elevation-z2 tabla-foodu">
            
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>

        <!-- TABLA CERRADOS DOMICILIO -->
        <div class="tabla-seccion">
          <h3>Cerrados</h3>
          <table mat-table [dataSource]="cerradosDomicilio" class="mat-elevation-z2 tabla-foodu">
            
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>
      </ng-container>
    </div>

    <!-- üìã PANEL NUEVO PEDIDO -->
    <div class="nuevo-pedido-panel" *ngIf="mostrarNuevoPedido">
      <h3>Nuevo Pedido - {{selectedTab === 'mostrador' ? 'Mostrador' : 'Domicilio'}}</h3>

      <!-- MOSTRADOR -->
      <form *ngIf="selectedTab === 'mostrador'" class="formulario-pedido" (ngSubmit)="crearPedido()">
        <mat-form-field appearance="outline" class="campo">
          <mat-label>Cliente</mat-label>
          <input matInput placeholder="Nombre del cliente" required>
        </mat-form-field>

        <mat-form-field appearance="outline" class="campo">
          <mat-label>Tipo de entrega</mat-label>
          <mat-select>
            <mat-option value="tienda">Recoger en tienda</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="campo">
          <mat-label>Observaci√≥n</mat-label>
          <textarea matInput rows="2"></textarea>
        </mat-form-field>

        <button mat-raised-button color="primary" class="btn-crear" type="submit">
          Crear Pedido
        </button>
      </form>

      <!-- DOMICILIO -->
      <form *ngIf="selectedTab === 'domicilio'" class="formulario-pedido" (ngSubmit)="crearPedido()">
        <mat-form-field appearance="outline" class="campo">
          <mat-label>Tel√©fono</mat-label>
          <input matInput required type="tel">
        </mat-form-field>

        <mat-form-field appearance="outline" class="campo">
          <mat-label>Cliente</mat-label>
          <input matInput required>
        </mat-form-field>

        <mat-form-field appearance="outline" class="campo">
          <mat-label>Calle</mat-label>
          <input matInput placeholder="Calle" required>
        </mat-form-field>

        <div class="direccion-grupo">
          <mat-form-field appearance="outline" class="campo">
            <mat-label>N√∫mero</mat-label>
            <input matInput required>
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo">
            <mat-label>Piso / Depto</mat-label>
            <input matInput>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="campo">
          <mat-label>Barrio</mat-label>
          <input matInput required>
        </mat-form-field>

        <mat-form-field appearance="outline" class="campo">
          <mat-label>Observaci√≥n</mat-label>
          <textarea matInput rows="2"></textarea>
        </mat-form-field>

        <mat-checkbox>Guardar cliente</mat-checkbox>

        <button mat-raised-button color="primary" class="btn-crear" type="submit">
          Crear Pedido
        </button>
      </form>
    </div>
  </div>
</div>