<div class="restaurante-layout">
  <!-- ðŸ“Š Barra de pestaÃ±as -->
  <div class="tabs-bar">
    <button mat-button [class.active]="selectedTab === 'mostrador'" (click)="selectTab('mostrador')">
      Mostrador
    </button>

    <button mat-button [class.active]="selectedTab === 'domicilio'" (click)="selectTab('domicilio')">
      Domicilio
    </button>

    <button mat-raised-button color="primary" class="nuevo-btn" (click)="abrirModalNuevoPedido()">
      {{ mostrarModalNuevoPedido ? 'âœ• Cerrar Panel' : '+ Nuevo Pedido' }}
    </button>
  </div>

  <!-- ðŸ§± CONTENEDOR PRINCIPAL: TABLAS + PANEL -->
  <div class="tablas-y-panel">

    <!-- ðŸ§¾ TABLAS (se ajusta automÃ¡ticamente) -->
    <div class="tablas-container">
      <!-- ðŸŸ  MOSTRADOR -->
      <ng-container *ngIf="selectedTab === 'mostrador'">
        <!-- TABLA PENDIENTES -->
        <div class="tabla-seccion">
          <h3>Pendientes</h3>
          <table mat-table [dataSource]="pendientes" class="mat-elevation-z2 tabla-foodu">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef> Acciones </th>
              <td mat-cell *matCellDef="let element">
                <button mat-raised-button color="primary" 
                        (click)="enviarPedido(element, 'pendientes')"
                        class="btn-enviado">
                  Enviado
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasMostrador"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasMostrador;"></tr>
          </table>
        </div>

        <!-- TABLA EN CURSO -->
        <div class="tabla-seccion">
          <h3>En curso</h3>
          <table mat-table [dataSource]="enCurso" class="mat-elevation-z2 tabla-foodu">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef> Acciones </th>
              <td mat-cell *matCellDef="let element">
                <button mat-raised-button color="primary" 
                        (click)="enviarPedido(element, 'enCurso')"
                        class="btn-enviado">
                  Enviado
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasMostrador"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasMostrador;"></tr>
          </table>
        </div>

        <!-- TABLA CERRADAS -->
        <div class="tabla-seccion">
          <h3>Cerradas (Ãšltimas 5)</h3>
          <table mat-table [dataSource]="cerradas" class="mat-elevation-z2 tabla-foodu">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasSoloLectura"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasSoloLectura;"></tr>
          </table>
        </div>
      </ng-container>

      <!-- ðŸï¸ DOMICILIO -->
      <ng-container *ngIf="selectedTab === 'domicilio'">
        <!-- TABLA PENDIENTES DOMICILIO -->
        <div class="tabla-seccion">
          <h3>Pendientes</h3>
          <table mat-table [dataSource]="pendientesDomicilio" class="mat-elevation-z2 tabla-foodu">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora Inicio </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="direccion">
              <th mat-header-cell *matHeaderCellDef> Direccion </th>
              <td mat-cell *matCellDef="let element"> {{element.direccion}} </td>
            </ng-container>

            <ng-container matColumnDef="telefono">
              <th mat-header-cell *matHeaderCellDef> Telefono </th>
              <td mat-cell *matCellDef="let element"> {{element.telefono}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="repartidor">
              <th mat-header-cell *matHeaderCellDef> Repartidor </th>
              <td mat-cell *matCellDef="let element"> {{element.repartidor}} </td>
            </ng-container>

            <ng-container matColumnDef="tiempo">
              <th mat-header-cell *matHeaderCellDef> Tiempo </th>
              <td mat-cell *matCellDef="let element"> {{element.tiempo}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef> Acciones </th>
              <td mat-cell *matCellDef="let element">
                <button mat-raised-button color="primary" 
                        (click)="enviarPedido(element, 'pendientesDomicilio')"
                        class="btn-enviado">
                  Enviado
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasDomicilioPendientes"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasDomicilioPendientes;"></tr>
          </table>
        </div>

        <!-- TABLA EN PREPARACIÃ“N -->
        <div class="tabla-seccion">
          <h3>En preparaciÃ³n</h3>
          <table mat-table [dataSource]="enPreparacion" class="mat-elevation-z2 tabla-foodu">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef> Acciones </th>
              <td mat-cell *matCellDef="let element">
                <button mat-raised-button color="primary" 
                        (click)="enviarPedido(element, 'enPreparacion')"
                        class="btn-enviado">
                  Enviado
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasDomicilioGenerales"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasDomicilioGenerales;"></tr>
          </table>
        </div>

        <!-- TABLA ENVIADOS -->
        <div class="tabla-seccion">
          <h3>Enviados</h3>
          <table mat-table [dataSource]="enviados" class="mat-elevation-z2 tabla-foodu">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasSoloLectura"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasSoloLectura;"></tr>
          </table>
        </div>

        <!-- TABLA CERRADOS DOMICILIO -->
        <div class="tabla-seccion">
          <h3>Cerrados</h3>
          <table mat-table [dataSource]="cerradosDomicilio" class="mat-elevation-z2 tabla-foodu">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef> Hora </th>
              <td mat-cell *matCellDef="let element"> {{element.hora}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let element"> ${{element.total | number}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasSoloLectura"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasSoloLectura;"></tr>
          </table>
        </div>
      </ng-container>
    </div>

    <!-- ðŸ“‹ PANEL LATERAL (derecha) -->
    <div class="panel-lateral" *ngIf="mostrarModalNuevoPedido">
      <app-modal-restaurante [mostrar]="mostrarModalNuevoPedido" [tipoPedido]="selectedTab"
        (pedidoCreado)="onPedidoCreado($event)" (cerrarModal)="cerrarModalNuevoPedido()">
      </app-modal-restaurante>
    </div>

  </div>
</div>